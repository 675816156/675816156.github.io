---
title: sed详解
date: YYYY-MM-DD HH:mm:ss
categories: 
- shell脚本
tags:
- sed 使用场景：
- 调用sed有三种方式：
- sed命令选项
- sed如何定位修改文件的位置
  - sed命令定位文本的方法
  - sed编辑命令
---
sed是一个非交互式文本编辑器，可对文本文件和标准输入进行编辑。sed从文本的一个文本行或标准输入中读数据，将其复制到缓存区，然后读取命令行或脚本第一个命令，对命令要求的行号进行编辑，重复此过程。

# sed 使用场景：

- 编辑相对交互式文本编辑器而言太大的文件
- 编辑命令太复杂，在交互式文本编辑器中难以输入的情况
- 对文件扫描一遍，但是需要执行多个编辑函数的情况

# 调用sed有三种方式：

- 在shell命令行输入命令调用sed，格式：

```
sed [选项] 'sed命令' 输入文件
```

- 将sed命令写到文件里，然后指定sed命令的文件，格式：

```
sed [选项] -f sed脚本文件 输入文件
```

- 将sed命令插入脚本文件后，设置该脚本文件可执行，然后直接执行该脚本文件，格式：

```
./sed脚本文件 输入文件
```

# sed命令选项

| 选项 |                             意义                             |
| :--: | :----------------------------------------------------------: |
|  -n  |                    不打印所有行到标准输出                    |
|  -e  | 表示将下一个字符串解析为sed编辑命令，如果只传递一个编辑命令给sed，-e可省略 |
|  -f  |                   表示正在调用sed脚本文件                    |

# sed如何定位修改文件的位置

- 使用行号，指定一行，或指定行号范围
- 使用正则表达式

## sed命令定位文本的方法

|       选项        |               意义               |
| :---------------: | :------------------------------: |
|         x         |           x为指定行号            |
|        x,y        |       指定从x到y的行号范围       |
|     /pattern/     |       查询包含两个模式的行       |
| /pattern/pattern/ |       查询包含两个模式的行       |
|    /pattern/,x    | 从与pattern的匹配行到x号之间的行 |
|    x,/pattern/    |  从x号行到pattern的匹配之间的行  |
|       x,y!        |      查询不包括x和y行号的行      |

## sed编辑命令

| 选项 |                   意义                   |
| :--: | :--------------------------------------: |
|  p   |                打印匹配行                |
|  =   |               打印文件行号               |
|  a\  |        在定位行号之后追加文本信息        |
|  i\  |        在定位行号之前插入文本信息        |
|  d   |                删除定位行                |
|  c\  |           用新文本替换定位文本           |
|  s   |         使用替换模式替换相应模式         |
|  r   |           从另一个文件中读文本           |
|  w   |           将文本写入到一个文件           |
|  y   |                 变换字符                 |
|  q   |         第一个模式匹配完成后退出         |
|  l   |    显示与八进制ASCII码等价的控制字符     |
|  {}  |            定位行执行的命令组            |
|  n   | 读取下一个输入行，用下一个命令处理新的行 |
|  h   |    将模式缓冲区的文本复制到保持缓冲区    |
|  H   |    将模式缓冲区的文本追加到保持缓冲区    |
|  x   |     互换模式缓冲区和保持缓冲区的内容     |
|  g   |     将保持缓冲区内容复制到模式缓冲区     |
|  G   |    将保持缓冲区的内容追加到模式缓冲区    |